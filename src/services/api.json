{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/liability":{"post":{"operationId":"LiabilityController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLiabilityDto"}}}},"responses":{"201":{"description":"Liability created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Liability"}}}},"403":{"description":"Forbidden. Not an Officer."},"404":{"description":"Student not found"}},"security":[{"bearer":[]}],"summary":"Create a new liability (Officer Only)","tags":["Liability"]},"get":{"operationId":"LiabilityController_findAll","parameters":[{"name":"status","required":false,"in":"query","description":"Filter by liability status","schema":{"example":"Unpaid","type":"string","enum":["Unpaid","Paid","Cancelled"]}},{"name":"studentUsername","required":false,"in":"query","description":"Filter by the student ID","schema":{"example":"1","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Field to sort by (e.g., 'dueDate', 'amount', 'status')","schema":{"example":"dueDate","type":"string"}},{"name":"sortOrder","required":false,"in":"query","description":"Sorty order ('ASC' or 'DESC')","schema":{"example":"ASC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"A list of liabilities.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Liability"}}}}},"403":{"description":"Forbidden. Insufficient role."}},"security":[{"bearer":[]}],"summary":"Find all liabilities (Officer/Admin Only)","tags":["Liability"]}},"/liability/me":{"get":{"operationId":"LiabilityController_findMy","parameters":[],"responses":{"200":{"description":"A list of the student's liabilities and their total balance.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MyLiabilitiesResponseDto"}}}},"403":{"description":"Forbidden. Not a Student."}},"security":[{"bearer":[]}],"summary":"Find all liabilities for the logged-in student","tags":["Liability"]}},"/liability/{id}":{"get":{"operationId":"LiabilityController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Liability retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Liability"}}}},"403":{"description":"Forbidden. Insufficient role."},"404":{"description":"Liability not found"}},"security":[{"bearer":[]}],"summary":"Find one liability by ID (Officer/Admin Only)","tags":["Liability"]},"patch":{"operationId":"LiabilityController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLiabilityDto"}}}},"responses":{"200":{"description":"Liability updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Liability"}}}},"403":{"description":"Forbidden. Insufficient role."},"404":{"description":"Liability not found"}},"security":[{"bearer":[]}],"summary":"Update a liability (Officer/Admin Only)","tags":["Liability"]},"delete":{"operationId":"LiabilityController_softDelete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Liability soft-deleted successfully."},"403":{"description":"Forbidden. Insufficient role."},"404":{"description":"Liability not found"},"409":{"description":"Cannot delete a liability that is already paid"}},"security":[{"bearer":[]}],"summary":"Soft-delete a liability (Officer/Admin Only)","tags":["Liability"]}},"/students":{"post":{"operationId":"StudentController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentRegistrationDto"}}}},"responses":{"201":{"description":""}},"tags":["Student"]},"get":{"operationId":"StudentController_findAll","parameters":[],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StudentDto"}}}}}},"tags":["Student"]}},"/students/{id}":{"patch":{"operationId":"StudentController_patchStudent","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentPatchDto"}}}},"responses":{"200":{"description":""}},"tags":["Student"]},"delete":{"operationId":"StudentController_deleteStudent","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Student"]}},"/officer":{"get":{"operationId":"OfficerController_findAll","parameters":[],"responses":{"default":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OfficerDto"}}}}}},"tags":["Officer"]}},"/user":{"get":{"operationId":"UserController_getUsers","parameters":[{"name":"status","required":false,"in":"query","schema":{"example":"Pending","type":"string","enum":["Pending","Active","Deactivated"]}},{"name":"role","required":false,"in":"query","schema":{"example":"Admin","type":"string","enum":["Admin","Officer","Student"]}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["User"]}},"/user/{id}":{"patch":{"operationId":"UserController_patchUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPatchDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["User"]}},"/admin":{"get":{"operationId":"AdminController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Admin"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponseDto"}}}}},"tags":["Auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDto"}}}},"responses":{"default":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"tags":["Auth"]}},"/auth/me":{"get":{"operationId":"AuthController_getMe","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Auth"]}}},"info":{"title":"Bansay API","description":"The Basay API, liability management system","version":"1.0","contact":{}},"tags":[{"name":"liability","description":""}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateLiabilityDto":{"type":"object","properties":{"studentUsername":{"type":"string","example":"mangorangca","description":"The student's username"},"type":{"type":"string","enum":["tuition","fee","fine","other"],"example":"fine","description":"The type of liability"},"amount":{"type":"number","example":150.75,"description":"The monetary amount of the liability"},"dueDate":{"type":"string","example":"2025-12-31","description":"The date the liability is due (YYYY-MM-DD)"}},"required":["studentUsername","type","amount","dueDate"]},"User":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string","example":"123456"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"email":{"type":"string","example":"john.doe@university.edu"},"role":{"type":"string","enum":["Admin","Officer","Student"],"example":"Student"},"status":{"type":"string","enum":["Pending","Active","Deactivated"],"example":"Active"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","username","firstName","lastName","email","role","status","createdAt","updatedAt"]},"Liability":{"type":"object","properties":{"id":{"type":"number"},"student":{"$ref":"#/components/schemas/User"},"issuer":{"$ref":"#/components/schemas/User"},"type":{"type":"string","enum":["tuition","fee","fine","other"],"example":"fine"},"amount":{"type":"number","example":150.75},"status":{"type":"string","enum":["Unpaid","Paid","Cancelled"],"example":"Unpaid"},"dueDate":{"format":"date-time","type":"string","example":"2025-12-31"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","student","issuer","type","amount","status","dueDate","createdAt","updatedAt"]},"MyLiabilitiesResponseDto":{"type":"object","properties":{"liabilities":{"type":"array","items":{"$ref":"#/components/schemas/Liability"}},"totalOutstandingBalance":{"type":"number","example":150.75,"description":"The sum of all UNPAID liabilities"}},"required":["liabilities","totalOutstandingBalance"]},"UpdateLiabilityDto":{"type":"object","properties":{}},"StudentRegistrationDto":{"type":"object","properties":{"idNumber":{"type":"string"},"email":{"type":"string"}},"required":["idNumber","email"]},"StudentDto":{"type":"object","properties":{"id":{"type":"number"},"fullName":{"type":"string"},"idNumber":{"type":"string"},"email":{"type":"string"}},"required":["id","fullName","idNumber","email"]},"StudentPatchDto":{"type":"object","properties":{"field":{"type":"string"},"value":{"type":"string"}},"required":["field","value"]},"OfficerDto":{"type":"object","properties":{"id":{"type":"number"},"fullName":{"type":"string"},"idNumber":{"type":"string"},"email":{"type":"string"}},"required":["id","fullName","idNumber","email"]},"UserPatchDto":{"type":"object","properties":{}},"UserRegisterDto":{"type":"object","properties":{"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"username":{"type":"string","example":"123456","description":"Student or Staff ID"},"email":{"type":"string","example":"john.doe@university.edu"},"password":{"type":"string","example":"securePassword123","minLength":6},"role":{"type":"string","enum":["Admin","Officer","Student"],"example":"Student"}},"required":["firstName","lastName","username","email","password","role"]},"RegistrationInfoDto":{"type":"object","properties":{"id":{"type":"number"},"firstName":{"type":"string"},"lastName":{"type":"string"},"username":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"}},"required":["id","firstName","lastName","username","email","role","status"]},"RegisterResponseDto":{"type":"object","properties":{"message":{"type":"string"},"user":{"$ref":"#/components/schemas/RegistrationInfoDto"}},"required":["message","user"]},"UserLoginDto":{"type":"object","properties":{"username":{"type":"string","example":"123456","description":"The username (Student or Staff ID)"},"password":{"type":"string","example":"securePassword123"},"role":{"type":"string","example":"Student","description":"Role of the user"}},"required":["username","password","role"]},"UserInfoDto":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}},"required":["id","username","email","role"]},"LoginResponseDto":{"type":"object","properties":{"message":{"type":"string"},"accessToken":{"type":"string"},"user":{"$ref":"#/components/schemas/UserInfoDto"}},"required":["message","accessToken","user"]}}}}